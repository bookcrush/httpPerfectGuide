# URL과 리소스
- 목표
  - URL 문법
  - 각 URL 컴포넌트의 의미와 역할
  - 단축 URL(상대 URL, 확장 URL)
  - 인코딩과 문자 규칙
  - 공통 URL 스킴
  - URN 이해하기

## 2.1 인터넷의 리소스 탐색하기
- URL
  - Uniform Resource Locator, 통합 자원 지시자
  - 인터넷의 `리소스`를 가리키는 `표준 이름`
    - 브라우저가 정보를 찾는데 필요한 리소스의 위치를 가리킴
    - 애플리케이션이 리소스에 접근할 수 있는 방법을 제공함
  - 구조: `스킴://서버위치/경로`
  - [URI](../chapter_1/chap1_이보라.md#132-uri)의 부분집합임
  
- 예시
  - URL: http://www.joes-hardware.com/seasonal/index-fall.html
    - 스킴: http
    - 서버위치: www.joes-hardware.com
    - 경로: /seasonal/index-fall.html
    
![](../images/2-1.png)

[그림 2-1 URL이 브라우저, 컴퓨터, 서버, 서버 파일 시스템의 어디에 위치하고 어떻게 연결되는지 보여준다.]

## 2.2 URL 문법

URL 문법은 스킴에 따라서 달라진다. 대부분의 URL 스킴의 문법은 일반적으로 9개 부분으로 나뉜다.

```
<스킴>://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>
```

| 컴포넌트 | 설명 | 기본값 |
| --- | --- | --- |
| **스킴** | 리소스를 가져오려면 어떤 프로토콜을 사용하여 서버에 접근해야 하는지를 가리킴 | 없음 |
| 사용자이름 | 몇몇 스킴은 리소스에 접근 하기 위해 사용자 이름이 필요함 | anonymous |
| 비밀번호 | 사용자의 비밀번호를 가리키며, 사용자 이름에 콜론(:)으로 이어서 기술함 | 이메일주소 |
| **호스트** | 리소스를 호스팅하는 서버의 호스트 명이나 IP 주소 | 없음 |
| 포트 | 리소스를 호스팅하는 서버가 열어놓은 포트 번호. 많은 스킴이 기본 포트를 가지고 있음(HTTP 기본 포트는 80임) | 스킴에 따라 다름 |
| **경로** | 이전 컴포넌트와 빗금으로 구분함. 리소스가 서버 내 어디에 있는지를 가리킴. 경로 컴포넌트의 문법은 서버와 스킴에 따라 다름 | 없음 |
| 파라미터 | 특정 스킴들에서 입력 파라미터를 기술하는 용도로 사용됨. 파라미터는 이름/값을 쌍으로 가짐. 다른 파라미터나 경로의 일부와 세미콜론(;)으로 구분하여 기술하며, 여러 개를 가질 수 있음 | 없음 |
| 질의 | 스킴에서 애플리케이션(데이터베이스, 게시판, 검색엔진, 기타 인터넷 게이트웨이)에 파라미터를 전달하는 데 쓰임. URL 끝에 "?"로 구분함 | 없음 |
| 프래그먼트 | 리소스 조각이나 일부를 가리키는 이름. URL이 특정 객체를 가리킬 경우에 프래그먼트 필드는 서버에 전달되지 않음. 이는 클라이언트에서만 사용됨. URL 끝에서 "#" 문자로 구분함 | 없음 |

## 2.2.1 스킴: 사용할 프로토콜

- URL을 해석하는 애플리케이션이 어떤 **프로토콜** 을 사용하여 리소스를 요청해야 하는지 알려줌
  - 주어진 리소스에 어떻게 접근하는지 알려주는 중요한 정보
- 알파벳으로 시작해야 하고 URL의 나머지 부분들과 첫 번째 콜론(:)으로 구분함

## 2.2.2 호스트와 포트

- 리소스를 호스팅하고 있는 장비와 그 장비 내에서 리소스에 접근할 수 있는 서버가 어디 있는지 알려줌
  - 호스트: 접근하려고 하는 리소스를 가지고 있는 인터넷상의 호스트 장비
  - 포트: 서버가 열어놓은 네트워크 포트를 가리킴
    - TCP 프로토콜을 사용하는 HTTP는 기본 포트로 80을 사용함

## 2.2.3 사용자 이름과 비밀번호
- 데이터 접근 허용 권한 부여에 사용됨
  - 예: FTP 서버
    - ftp://ftp.prep.ai.mit.edu/pub/gnu
      - 사용자 이름이나 비밀번호 컴포넌트 없이 표준 스킴, 호스트, 경로만 있음
      - 사용자 이름이나 비밀번호 컴포넌트가 없는 경우
        - 사용자 이름 기본값: anonymous
        - 비밀번호 기본값: 브라우저마다 다름(IE: IEUser, 크롬: chrome@example.com)
    - ftp://anonymous@ftp.prep.ai.mit.edu/pub/gnu
      - 사용자 이름이 anonymous임. '@' 문자는 URL로부터 사용자 이름과 비밀번호 컴포넌트를 분리함
    - ftp://anonymous:my_passwd@ftp.prep.ai.mit.edu/pub/gnu
      - 사용자 이름(anonymous)과 비밀번호(my_passwd)를 콜론(:)으로 분리하여 기술함

## 2.2.4 경로
- 서버가 리소스의 위치를 찾는 데 사용하는 정보(리소스가 서버의 어디에 있는지 알려줌)
- 계층적 파일 시스템 경로와 유사한 구조를 가짐
  - '/' 문자를 기준으로 경로 조각으로 나뉨

## 2.2.5 파라미터
- 애플리케이션이 서버에 정확한 요청을 하는 데 필요한 입력 파라미터를 받는 데 사용함
  - 많은 스킴이 객체에 대한 호스트 및 경로 정보만으로는 리소스를 찾지 못함
    - 서버가 어떤 포트를 열어놓고 있는지,
    - 리소스에 접근하기 위해 이름과 비밀번호를 명시했는지 등의 정보가 필요함
- 이름/값 쌍의 리스트
- 세미콜론(;)으로 URL 나머지 부분들과 구분함
- 예시:
  - ftp://prep.ai.mit.edu/pub/gnu;type=d
    - 파라미터: type=d
  - http://www.joeshardware.com/hammers;sale=false/index.html;graphics=true
    - 파라미터: sale=false, graphics=true

## 2.2.6 질의 문자열
- 데이터베이스 같은 서비스들은 요청받을 리소스 형식의 범위를 좁히기 위해서 질문이나 질의를 받을 수 있음
- 물음표(?) 우측의 값
- '&'로 나뉜 '이름=값' 쌍 형식의 문자열
- 예시: 
  - http://www.joes-hardware.com/inventorycheck.cgi?item=12731&color=blue
    - 질의 문자열: item=12731&color=blue
    
![](../images/2-2.png)

[그림 2-2 URL 질의 컴포넌트는 게이트웨이 애플리케이션으로 전달된다.]

## 2.2.7 프래그먼트
- 리소스의 특정 부분을 가리킬 수 있도록 해줌
- 샵(#) 우측의 값
- 예시:
  - 큰 한 개의 텍스트 문서에서 내부의 특정 절을 가리키려는 경우
  - HTML 문서에 있는 특정 이미지
  - http://www.joes-hardware.com/tools.html#drills
    - 프래그먼트: drills
    
![](../images/2-3.png)

[그림 2-3 서버는 객체를 전체 단위로만 전송하기 때문에 URL 프래그먼트는 클라이언트에서만 사용된다.]

## 2.3 단축 URL
- 리소스 안에 있는 리소스를 간결하게 기술하는 데 사용됨

## 2.3.1 상대 URL
- URL은 절대 URL과 상대 URL로 나뉨
  - 절대 URL: 리소스에 접근하는데 필요한 모든 정보를 가지고 있음
  - 상대 URL
    - `URL을 짧게 표기하는 방식`으로 모든 정보를 담고 있진 않음
      - 프래그먼트나 URL의 일부임
      - 스킴, 호스트, 다른 컴포넌트들을 모두 입력하지 않아도 됨
- 기저(base) URL과 상대 URL을 조합해 리소스에 접근하는데 필요한 정보(절대 URL)를 얻음
  - 기저 URL: 상대 URL의 기준이 되는 URL
- 예시:
  - 기저 URL: http://www.joes-hardware.com/
  - 상대 URL: ./hammers.html
  - 새로운 절대 URL: http://www.joes-hardware.com/hammers.html

![](../images/2-4.png)

[그림 2-4 기저 URL의 사용]


- URL을 처리하는 브라우저 같은 애플리케이션은 상대 ULR과 절대 URL 간에 상호 변환을 해줌

![](../images/2-5.png)

[그림 2-5 상대 URL을 절대 URL로 변환하기]

## 2.3.2 URL 확장

- 브라우저는 URL을 입력한 다음이나 입력하고 있는 동안에 자동으로 URL 을 확장해줘 사용자가 빠르게 URL을 입력하도록 해줌
  - 호스트명 확장: 입력한 호스트 명을 전체 호스트 명으로 확장해줌
    - 예시: 'yahoo'를 입력하면 'www.yahoo.com'를 만들어줌
  - 히스토리 확장: 과거에 사용자가 방문했던 URL 기록을 저장해 놓았다가 URL을 입력하면 입력된 URL의 앞글자들을 포함하는 완결된 형태의 URL을 선택하게 해줌
    - 예시: 'http://joes-'를 입력하면 'http://www.joes-hardware.com'을 보여줌

## 2.4 안전하지 않은 문자
- 안전한 전송: 정보가 유실될 위험 없이 URL을 전송할 수 있다는 것을 의미함


## 2.4.1 URL 문자 집합

## 2.4.2 인코딩 체계

## 2.4.3 문자 제한


## 2.5 스킴의 바다


    

   