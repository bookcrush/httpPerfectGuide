# HTTP

## 1.1 HTTP

HTTP 는 이미지, HTML 페이지, 텍스트 파일등을 웹서버로부터 빠르고 정확하게 웹브라우저로 옮겨준다. 신뢰성 있는 데이터 전송 프로토콜을 사용하기 때문에 전송 중 손상되거나 꼬이지 않음을 보장한다.

## 1.2 웹 클라이언트와 서버

웹 서버는 HTTP 프로토콜로 의사소통을 하기 때문에 HTTP 서버라고 불린다.
클라이언트는 서버에게 HTTP 요청을 보내고 서버는 요청된 데이터를 HTTP 응답으로 돌려준다.

## 1.3 리소스

웹 서버는 웹 리소스를 관리하고 제공한다. 이미지, 동영상, 워드파일 등등 어떠한 콘텐츠 소스도 리소스가 될 수 있따.

### 1.3.1 미디어 타입

HTTP 는 웹에서 전송되는 객체 각각에 MIME 타입이라는 데이터 포맷 라벨을 붙인다.

- MIME 타입은 각기 다른 전자메일 시스템 사이에서 메시지가 오갈 때 겪는 문제점을 해결하기 위해 설계되었다. HTTP 에서도 멀티미디어 콘텐츠를 기술하고 라벨을 붙이기 위해 채택되었다.

웹브라우저는 서버로부터 객체를 돌려받을 때, 다룰 수 있는 객체인지 MIME 타입을 통해 확인한다.

- HTML ⇒ text/html
- plain ASCII 텍스트 ⇒ text/plain
- JPEG ⇒ image/jpeg
- GIF ⇒ image/gif

### 1.3.2 URI

웹 서버 리소스는 각자 이름을 갖고 있기 때문에, 클라이언트는 관심 있는 리소스를 지목할 수 있다. 서버 리소스 이름은 URI 또는 통합 자원 식별자 라고 불린다.

URI 는 URL 과 URN 두 가지가 있다.

### 1.3.3 URL

통합 자원 지시자는 리소스 식별자의 가장 흔한 형태다. 특정 서버의 리소스에 대한 구체적인 위치를 서술한다.

- URL 의 첫 번째 부분은 스킴이라고 불린다. 사용되는 프로토콜을 서술한다.  ex. http://
- 두 번째 부분은 인터넷 주소를 제공한다. ex. www.naver.com
- 마지막 부분은  웹 서버의 리소스를 가리킨다. ex. /specials/index.html

### 1.3.4 URN

유니폼 리소스 (URN) 은 콘텐츠를 이루는 리소스에 대해 리소스의 위치에 영향 받지 않는 유일무이한 이름 역할을 한다. 위치 독립적인 URN 은 리소스가 옮겨지더라도 문제없이 동작한다.

아직은 실험중인 단계이다.

## 1.4 트랜잭션

HTTP 트랜잭션은 요청 명령과 응답 결과로 구성되어 있다. 이 상호작용은 HTTP 메시지라고 불리는 정형화된 데이터 덩어리를 통해 이루어진다.

### 1.4.1 메서드

HTTP 메서드는 여러 가지의 요청 명령을 지원한다. 모든 HTTP 요청 메시지는 한 개의 메서드를 갖는다. 

- GET: 클라이언트에서 지정한 리소스를 받는다
- PUT: 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장
- DELETE: 리소스를 서버에서 삭제
- POST: 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보냄
- HEAD: 지정한 리소스에 대한 응답에서 HTTP 헤더 부분만 받음

### 1.4.2 상태 코드

HTTP 응답 메세지는 상태 코드와 함께 반환됩니다. 

- 200: 정상적으로 반환
- 302: 다른 곳에서 리소스를 가져가라
- 404: 리소스를 찾을 수 없다.

## 1.5 메세지 

HTTP 메세지는 단순한 줄 단위의 문자열이다. 클라이언트에서 서버로 보낸 메세지를 요청 메세지라고 부른다. 
서버에서 클라이언트로 가는 메세지를 응답 메세지라고 부른다. 

- 시작줄: 요청이라면 무엇을 해야하는지, 응답이라면 무슨일이 일어났는지 나타낸다.
- 헤더: 이름과 하나의 값으로 구성된다. 
- 본문: 요청의 본문은 서버로 데이터를 실어 보내며, 응답의 본문은 클라이언트로 데이터를 반환한다. 

## 1.6 TCP 커넥션

TCP 커넥션을 이용하여 메세지가 옮겨진다. 

### 1.6.1 TCP/IP

HTTP 는 네트워크 통신의 핵심적인 세부사항에 대해서 신경 쓰지 않고 TCP/IP 프로토콜에게 맡긴다.
    
TCP 는 다음을 제공한다.

- 오류 없는 데이터 전송
- 순서에 맞는 전달
- 조각나지 않는 데이터 스트림 

### 1.6.2 접속, IP 주소, 포트번호 

HTTP 클라이언트가 서버에 메세지를 전송할 수 있게 되기 전에, 인터넷 프로토콜 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 맺어야한다.

## 1.8 웹의 구성요소

- 프락시: 클라이언트와 서버 사이에 위치한 HTTP 중개자
- 캐시: 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고
- 게이트웨이: 다른 애플리케이션과 연결된 특별한 웹 서버
- 터널: 단순 HTTP 통신을 전달하기만 하는 특별한 프락시
- 에이전트: 자동화된 HTTP 요청을 만드는 준지능적 웹클라이언트

### 1.8.1 프락시

HTTP 프락시 서버는 보안, 어플리케이션 통합, 성능 최적화를 위한 중요한 구성요소이다.
클라이언트와 서버 사이에 위치하여, 클라이언트의 모든 HTTP 요청을 받아 서버에 전달한다. 

- 프락시는 주로 `보안`을 위해 사용된다
- 요청과 응답을 필터링한다.

### 1.8.2 캐시

웹 캐시와 캐시 프락시는 자주 찾는 것의 사본을 저장해 두는 특별한 종류의 HTTP 프락시 서버다. 
클라이언트는 멀리 떨어진 웹 서버보다 근처의 캐시에서 훨 씬 더 빨리 문서를 다운 받을 수 있다.

### 1.8.3 게이트웨이

게이트웨이는 다른 서버들의 중개자로 동작하는 특별한 서버이다. 
주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용한다. 

### 1.8.4 터널

두 커넥션 사이에서 raw 데이터를 열어보지 않고 그대로 전달해주는 HTTP 어플리케이션이다. 
주로 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송해주기 위해 사용한다.

### 1.8.5 에이전트

사용자 에이전트는 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램이다. 

