# HTTP 개관
목표: HTTP 빠르게 훑어보기 

## 1.1 HTTP: 인터넷의 멀티미디어 배달부
- HTTP: 신뢰성 있는 데이터 전송 프로토콜로, `배달부` 역할을 함
  - 출발지: 웹 서버 (== HTTP 서버)
  - 목적지: 웹 브라우저
  - 배달하는 것: 웹 콘텐츠(이미지, HTML 페이지, 텍스트 파일, 동영상, 음성파일, 자바 애플릿 등)


## 1.2 웹 클라이언트와 서버


[그림 1-1 웹 클라이언트와 웹 서버]

웹브라우저가 서버에게 HTTP 객체를 요청하고, 서버는 요청받은 객체를 찾고, 성공했다면 그것의 타입, 길이 등의 정보와 함께 HTTP 응답에 실어 클라이언트에게 보냄

## 1.3 리소스
- 웹 리소스란: 웹에 콘텐츠를 제공하는 모든 것
- 웹 리소스 관리 주체: 웹 서버
- 웹 리소스는 웹 콘텐츠의 원천임
- 웹 리소스 종류
  - 정적 파일: 텍스트 파일, HTML 파일, 워드 파일, PDF, 이미지 파일, 동영상 파일 등
  - 동적 콘텐츠: 소프트웨어 프로그램이 만들어내는 컨텐츠로, 요청자의 신원, 요청 내용, 요청 일시 등에 따라 컨텐츠가 변함(동적으로 생성됨)


[그림 1-2 웹 리소스란 웹에 콘텐츠를 제공하는 모든 것을 말한다.]

### 1.3.1 미디어 타입
- MIME 타입
  - Multipurpose Internet Mail Extensions, 다목적 인터넷 메일 확장
  - 웹을 통해 전송되는 HTTP 객체에 붙이는 이름표로, 자료형(data type) 정보가 담김
  - 사선(/)으로 주 타입과 부 타입을 구분함
    - 예시:
      - HTML로 작성된 텍스트 문서: text/html
      - plain ASCII 텍스트 문서: text/plain
      - JPEG 이미지: image/jpeg
      - 파워포인트 파일(*.ppt): application/vnd.mspowerpoint
  - [MIME 타입 전체 목록](https://developer.mozilla.org/ko/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types)


[그림 1-3 웹 서버는 데이터 콘텐츠와 함께 MIME 타입을 보내준다.]

### 1.3.2 URI
- Uniform Resource Identifier, 통합 자원 식별자
- 서버에 저장된 리소스 각각에 지정된 고유한 이름으로, 위치정보도 포함함(우편물 주소와 유사). 클라이언트는 원하는 리소스를 지목할 때 이 이름을 사용함
- 예시:
  - 웹서버에 있는 이미지 리소스: http://www.joes-hardware.com/specials/saw-blade.gif
- 종류
  - URL
    - Uniform Resource Locator, 통합 자원 지시자
    - 특정 서버의 한 리소스에 대한 구체적인 위치를 서술하며, 1) 프로토콜, 2) 서버의 인터넷 주소, 3) 웹 서버의 리소스로 구성됨
  - URN
    - Uniform Resource Name, 통합 자원 이름
    - 콘텐츠를 이루는 한 리소스에 대해, 그 리소스의 위치에 영향 받지 않는 유일무이한 이름 역할을 함(실험 중이고 아직 채택되진 않은 상태임)
  - 오늘날 대부분의 URI는 URL이므로, URI와 URL가 동격으로 쓰임 
- 자세한 내용은 2장에서 다룸


[그림 1-4 URL은 프로토콜, 서버, 리소스를 명시한다.]

## 1.4 트랜잭션
- 클라이언트와 웹 서버가 HTTP를 이용해 리소스를 주고 받는 (상호 작용) 방법
- 요청 명령과 응답 결과로 구성됨
  - 요청 명령: 클라이언트가 서버로 보냄
  - 응답 결과: 서버가 클라이언트에게 돌려주는 결과
- `HTTP 메시지`라고 불리는 정형화된 데이터 덩어리를 이용해 이루어짐
 

[그림 1-5 HTTP 트랜잭션은 요청과 응답 메시지로 구성되어 있다.]

### 1.4.1 메서드
- 요청 명령의 종류로, 서버에게 어떤 동작이 취해져야 하는지 말해줌 
- 모든 HTTP 요청 메시지는 한 개의 메서드를 갖음
- 주요 메서드

| HTTP메서드 | 설명 | 관련 DB 쿼리 |
| --- | --- | --- |
| `GET` |서버에서 클라이언트로 지정한 리소스를 보내라.|READ/SELECT|
| `PUT` |클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라.|UPDATE|
| `DELETE` |지정한 리소스를 서버에서 삭제하라.||
| `POST` |클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라.|CREATE/INSERT|
| `HEAD` |지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라.||

### 1.4.2 상태 코드
- 클라이언트에게 요청이 성공했는지 아니면 추가 조치가 필요한지 알려주는 세 자리 숫자
- 모든 HTTP 응답 메시지는 상태 코드와 함께 전송됨
- 텍스트로 된 사유 구절(reason phrase)도 함게 전송됨
- 주요 상태코드

| HTTP메서드 | 설명 |
| --- | --- |
| 200 | 좋다. 문서가 바르게 반환되었다. |
| 302 | 다시 보내라. 다른 곳에 가서 리소스를 가져가라. |
| 404 | 없음. 리소스를 찾을 수 없다. |

- 자세한 내용은 3장에서 다룸

### 1.4.3 웹페이지는 여러 객체로 이루어질 수 있다
- 페이지 하나를 구성하려면 대량의 HTTP 트랜잭션을 수행해야 함


[그림 1-6 웹페이지는 첨부된 리소스들에 대해 각각 별개의 HTTP 트랜잭션을 필요로 한다.]

## 1.5 메시지
- HTTP 메세지는 단순한 줄 단위의 문자열임.
- 종류:
  - 요청 메시지: 웹 클라이언트에서 웹 서버로 보낸 메시지
  - 응답 메시지: 서버에서 클라이언트로 가는 메시지 
- 구성:
  - 시작줄
    - 메시지의 첫줄
    - 요청이라면 무엇을 해야 하는지, 응답이라면 무슨 일이 일어났는지 나타냄
  - 헤더
    - 시작줄 다음에 이어지는 필드
    - 각 헤더 필드는 쉬운 구문분석을 위해 콜론(:)으로 구분되어있는 하나의 이름과 하나의 값으로 구성됨
    - 빈 줄로 끝남 
  - 본문
    - 빈줄 다음에 들어가는 내용
    - 어떤 종류의 데이터든 들어갈 수 있음
      - 텍스트를 비롯한 임의의 이진데이터도 가능함
        - 이미지, 비디오, 오디오 트랙, 응용 소프트웨어 등

## 1.5.1 간단한 메세지의 예


[그림 1-8  http://www.joes-hardware.com/tools.html에 대한 GET 트랜잭션의 예]

- 간단한 HTTP 메시지를 주고받는 트랜잭션
  - 요청
    - 리소스: http://www.joes-hardware.com/tools.html
    - 메서드: GET
    - 로컬 리소스: /tools.html
    - 요청 프로토콜: HTTP/1.0
  - 응답
    - HTTP 버전 번호: HTTP/1.0
    - 상태 코드: 200(성공)
    - 사유 구절: OK
    - 응답 헤더 필드 영역
      - Content-length(응답 본문 길이)
      - Content-type(문서의 MIME 타입)
    - 응답 본문

## 1.6 TCP 커넥션
- Transmission Control Protocol, 전송 제어 프로토콜
- 어떻게 HTTP 메시지가 TCP 커넥션을 통해 한 곳에서 다른 곳으로 전송되는지 

### 1.6.1 TCP/IP

### 1.6.2 접속, IP 주소 그리고 포트번호 

### 1.6.3 텔넷을 이용한 실제 예제

## 1.7 프로토콜 버전
- HTTP/1.1: 현재 HTTP 버전
- HTTP/2.0: HTTP/1.1 성능 문제를 해결하기 위해 설계가 진행중임

## 1.8 웹의 구성요소

- 프락시: 클라이언트와 서버 사이에 위치한 HTTP 중개자
- 캐시: 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고
- 게이트웨이: 다른 애플리케이션과 연결된 특별한 웹 서버
- 터널: 단순히 HTTP 통신을 전달하기만 하는 특별한 프락시
- 에이전트: 자동화된 HTTP 요청을 만드는 준지능적(semi-intelligent) 웹클라이언트

### 1.8.1 프락시
- 클라이언트와 서버 사이에서 클라이언트의 모든 HTTP 요청을 받아 (요청을 수정한 후) 서버에 트래픽을 전달해주는 `중개 서버`
- 보안, 애플리케이션 통합, 성능 최적화를 수행함
- `보안`
  - 신뢰할 만한 중개자 역할을 함
  - 요청과 응답을 필터링 함


[그림 1-11 프라시는 클라이언트와 서버 사이에서 트래픽을 전달한다.]

### 1.8.2 캐시
- 성능 향상을 목적으로 자주 찾는 문서의 사본을 저장해 두는 특별한 종류의 HTTP 프락시 서버
- 캐싱키술


[그림 1-12 캐시 프락시는 성능 향상을 위해 자주 찾는 문서의 사본을 저장해둔다.]

### 1.8.3 게이트웨이
- 다른 서버들의 중개자로 동작하는 특별한 서버 
- HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용됨


[그림 1-13 HTTP/FTP 게이트웨이]

### 1.8.4 터널
- 두 커넥션 사이에서 날(raw) 데이터를 열어보지 않고 그대로 전달해주는 HTTP 어플리케이션
- 주로 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송해주기 위해 사용됨


[그림 1-14 비 HTTP 네트워크 너머로 데이터를 전달하는 터널(HTTP/SSL 터널)]

### 1.8.5 에이전트
- 사용자 에이전트라고도 불리며, 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램
- 예시: 사람의 통제 없이 스스로 웹을 돌아다니며 HTTP 트랜잭션을 일으키고 콘텐츠를 받아오는 크롤러


[그림 1-15 자동화된 검색 엔진 스파이더는 전 세계의 웹페이지를 수집하는 에이전트이다.]


## 1.9 시작의 끝

## 1.10 추가 정보

### 1.10.1 HTTP 프로토콜에 대한 정보
- HTTP Pocket Reference: HTTP에 대한 간략한 설명을 담은 책
- https://www.w3.org/Protocols/: HTTP 프로토콜에 대한 정보가 있음
- https://www.ietf.org/rfc/rfc2616.txt: HTTP/1.1 공식 명세서
### 1.10.2 역사적 시각
### 1.10.3 기타 월드 와이드 웹 정보

