# URL 과 리소스

## 2.1 인터넷의 리소스 탐색하기

URL 은 인터넷의 리소스를 가리키는 표준이름입니다.
리소스가 어디에 있고 어떻게 접근 할 수 있는지 알려줍니다.

- URL: URI 라고 불리는 더 일반화된 부류의 부분집합 (대부분은 스킴//서버위치/경로의 구조를 가집니다)
- URI: URL 과 URN 으로 구성된 종합적인 개념
- URN: 리소스가 어디에 존재하든 상관없이 이름만으로 리소스 식별이 가능

https://www.naver.com/webtoon/index.html 이라는 주소가 있을때

- https 는 `URL의 스킴` 입니다. 웹 클라이언트가 리소스에 어떻게 접근하는지 알려줍니다.
- www.naver.com 은 `서버의 위치` 입니다. 리소스가 어디에 호스팅 되어 있는지 알려줍니다.
- /webtoon/index.html 은 `리소스의 경로` 입니다.

## 2.2 URL 문법

URL 문법은 스킴에 따라서 달라진다. 대부분의 URL 스킴의 문법은 일반적으로 9개 부분으로 나뉜다.

```text
<스킴>://<사용자이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>
```

|            | 설명                                                                        | 기본값             |
| ---------- | --------------------------------------------------------------------------- | ------------------ |
| 스킴       | 어떤 프로토콜을 사용하여 서버에 접근해야하는지                              | 없음               |
| 사용자이름 | 리소스 접근을 위한 사용자 이름이 필요 할 수 있다.                           | anonymous          |
| 비밀번호   | 사용자의 비밀번호, 이름에 : 으로 이어서 표시                                | 이메일주소         |
| 호스트     | 호스팅명이나 IP 주소                                                        |                    |
| 포트       | 서버가 열어놓은 포트, HTTP 기본 포트는 80                                   | 스킴에 따라 다르다 |
| 경로       | 리소스가 서버내 어디에 있음을 가리킨다.                                     |                    |
| 파라미터   | 특정 스킴들에서 입력 파라미터를 기술하는 용도                               |                    |
| 질의       | 스킴에서 애플리케이션에 파라미터를 전달하는 용도, URL 끝에 "?" 로 구분한다  |                    |
| 프래그먼트 | 리소스의 조각이나 일부분을 가리키는 이름, URL 의 끝에서 "#" 문자로 구분한다 |                    |

## 2.2.1 스킴: 사용할 프로토콜

스킴은 주어진 리소스에 어떻게 접근하는지 알려주는 중요한 정보다. URL 을 해석하는 애플리케이션이 어떤 프로토콜을 사용하여 리소스를 요청해야 하는지 알려준다.

## 2.2.2 호스트와 포트

URL 의 호스트와 포트 컴포넌트는 리소스를 호스팅하고 있는 장비와, 접근할 수 있는 서버가 어디에 있는지 정보를 제공해준다.

## 2.2.3 사용자 이름과 비밀번호

많은 서버가 데이터에 접근을 허용하기 전에 사용자 이름과 비밀번호를 요구한다.

- ftp:ftp.prep.ai.mit.eud/pub/gnu: 사용자 이름이나 비밀번호 컴포넌트가 없이 표준 스킴, 호스트, 경로만 있다.
- ftp:anonymous@ftp.prep.ai.mit.eud/pub/gnu: 사용자 이름이 `anonymous` 이다. '@' 문자는 URL로부터 사용자 이름과 비밀번호 컴포넌트를 분리한다.
- ftp:anonymous:my_passwd@ftp.prep.ai.mit.eud/pub/gnu: 사용자이름 `anonymous` 과 비밀번호 `my_passwd` 를 ':' 로 분리하여 기술

## 2.2.4 경로

URL 의 경로 컴포넌트는 리소스가 서버의 어디에 있는지 알려준다. '/' 문자를 기준으로 경로조각으로 나뉜다.

## 2.2.5 파라미터

많은 스킴이 객체에 대한 호스트 및 경로 정보만으로는 리소스를 찾지 못한다. 어떤 포트를 사용하고 있는지, 이름과 비밀번호를 명시했는지 등등 많은 정보를 요구한다.

HTTP URL 에서의 경로 컴포넌트는 경로조각으로 나눌 수 있다. 각 조각은 자체 파라미터를 가질 수 있다.

```
http://www.joes-hardware.com/hammers;sale=false/index.html;graphics=true
```

hammers 와 index.html 이라는 두 개의 경로 조각이 있다. hammers는 sale 파라미터를 가지고, index.html 은 graphics 란 파라미터를 가진다.

## 2.2.6 질의 문자열

데이터베이스 같은 서비스들은 요청받을 리소스 형식의 범위를 좁히기 위해서 질문이나 질의를 받을 수 있다.
'&' 로 나뉜 '이름=값' 쌍 형식으로 표현할 수 있다.

## 2.2.7 프래그먼트

리소스에 대한 URL 은 텍스트 문자 전체를 가리키지만, 이상적으로 리소스 내부의 특정 절을 가리 킬 수 있어야 한다.
프래그먼트를 이용하면 HTML 같은 리소스 형식들은 본래 수준보다 더 작게 나뉠 수 있다.

프래그먼트는 '#' 문자에 이어서 온다.

```
http://www.joes-hardware.com/tools.html#drills
```

위의 주소는 tools.html 웹페이지의 일부를 가리친다. 그 부분을 drills 라고 기술한다.

## 2.3 단축 URL

상대 URL 은 리소스 안에 있는 리소스를 간결하게 기술하는데 사용할 수 있다. 사용자가 기억하고 있는 URL 일부를 입력하면 나머지 부분을 자동으로 입력해주는 URL 자동 확장 기능을 지원한다.

## 2.3.1 상대 URL

URL 은 상대, 절대 두 가지로 나뉜다.

- 절대 URL: 리소스에 접근하는데 필요한 모든 정보를 가지고 있다.
- 상대 URL: 모든 정보를 담고 있지 않다. 상대 URL 로 리소스에 접근하는데 필요한 정보를 얻기 위해서는 기저라고 하는 다른 URL 을 사용해야한다.

```html
<a href="./hammers.html"></a>
```

html 문서 내부에 ./hammers.html URL 을 가리키는 하이퍼링크가 있다. 이것이 상대 URL 이다.

```
http://www.joes-hardware.com/tools.html
```

위의 주소가 기저 URL 일 때, 이 기저 URL 을 바탕으로 정보를 추측할 수 있다.

```
http://www.joes-hardware.com/hammers.html
```

- 기저 URL: 기저 URL 은 상대 URL 의 기준이 된다.
- 리소스에서 명시적으로 제공: 리소스들은 URL을 명확하게 기술하기도 한다.
- 리소스를 포함하고 있는 기저 URL: 상대 URL 기저 URL 이 명시되지 않은 리소스에 포함된 경우 해당 리소스 URL을 기저 URL 로 사용할 수 있다.
- 기저 URL 이 없는 경우: 이런 경우는 절대 URL 만으로 이루어져 있다는 뜻이다. 불완전하거나 깨진 URL 일 수도 있다.
- 상대 참조 해석하기: 상대 URL 과 기저 URL 을 각각의 컴포넌트 조각으로 나누는 것

## 2.3.2 URL 확장

브라우저들은 URL 을 입력한 다음이나 입력하고 있는 동안에 자동으로 URL 을 확장한다

- 호스트명 확장: 'yahoo' -> 'www.yahoo.com' or 추가적인 몇가지 URL 제시
- 히스토리 확장: 과거에 사용자가 방문했던 URL 을 저장해 놓는 것

## 2.4 안전하지 않은 문자

안전한 전송이란 정보가 유실될 위험 없이 URL을 전송할 수 있다는 것을 의미한다.
어떤 인터넷 프로토콜을 통해서든 안전하게 전송될 수 있도록 URL 을 설계하는 것은 중요하다

## 2.4.1 URL 문자 집합

컴퓨터 시스템은 보통 US-ASCII 문자 집합을 사용해왔다. US-ASCII 의 경우 만들어진 지 오래된 문자 집합이기 때문에 적은 수의 문자만을 포함하고 있다.
그렇기 때문에 전 세계 사람들이 사용하는 언어를 지원하기에는 무리가 있다.
이런 문제점을 해결하기 위해 URL에 이스케이프 문자열을 쓸 수 있게 설계하였다.

## 2.4.2 인코딩 체계

안전한 문자 집합을 이용하는 경우 표현의 한계를 넘기 위해, URL 에 있는 안전하지 않은 문자들을 표현할 수 있는 인코딩 방식이 고안되었다.
안전하지 않은 문자를 % 으로 시작해 두개의 16 진수 숫자로 이루어진 이스케이프 문자(-, '', %)로 바꾼다.

## 2.4.3 문자 제한

몇몇 문자는 URL 내에서 특별한 의미로 예약되어있다. 다른 용도로 사용하려면 인코딩 해야되는 문자들이다

| 문자  | 선점 및 제한                                                                 |
| ----- | ---------------------------------------------------------------------------- |
| %     | 인코딩된 문자에 사용할 이스케이프 토큰으로 선점                              |
| /     | 경로 세그먼트를 나누는 용도                                                  |
| .     | 경로 컴포넌트에서 선점                                                       |
| ..    | 경로 컴포넌트에서 선점                                                       |
| #     | 프래그먼트의 구획 문자로 선점                                                |
| ?     | 질의 문자열의 구획 문자로 선점                                               |
| ;     | 파라미터의 구획 문자로 선점                                                  |
| :     | 스킴, 사용자 이름/ 비밀번호, 호스트/포트의 구획 문자로 선점                  |
| \$, + | 선점                                                                         |
| @ & = | 특정 스킴에서 특별한 의미가 있기 때문에 선점                                 |
| {}    | \ ~ [] ` | 게이트웨이와 같은 전송 에이전트에서 불안전하게 다루기 떄문에 제한 |
| <> "" | 안전하지 않음. URL 범위 밖에서 역할이 있는 문자이기 떄문에 반드시 인코딩     |

## 2.5 스킴의 바다

- http: 일반 URL 포맷을 지키는 하이퍼 텍스트 전송 프로토콜 기본 포트는 80 을 사용한다.
- https: http 와 거의 같다. 커넥션의 양 끝단에서 암호화를 한다. 기본 포트는 443 이다.
- mailto: 이메일 주소를 가리킨다. 표준 URL 과는 다른 포맷을 가진다.
- ftp: 파일 전송 프로토콜
- rtsp, rtspu: 실시간 스트리밍 프로토콜
- file: 파일 공유 시스템에서 바로 접글 할 수 있는 파일들을 나타낸다.
- news: 특정 문서나 뉴스 그룹에 접근하는데 사용한다.
- telnet: 대화형 서비스에 접근하는데 사용된다.
